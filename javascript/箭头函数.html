<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      //作用:更简短的函数并且不绑定this
      //箭头函数表达式的语法比函数表达式更简洁，并且没有自己的this，arguments，super或new.target，没有原型对象 
      const arrow = () => {
        console.log(this); // this访问的的window
        // 以下访问两个变量会报错
        // console.log(arguments); // Uncaught ReferenceError: arguments is not defined
        // console.log(new.target) // Uncaught SyntaxError: new.target expression is not allowed here
      };

      arrow();
      // 不能用作构造函数 规则上报错
      // const Person = (name, age) => {
      //   this.name = name;
      //   this.age = age;
      // };

      // Uncaught TypeError: Person is not a constructor
      // const p = new Person("123", 123); 

      // 通过call或apply或bind调用 只会传递参数 第一个参数会被忽略
      const arrowFn = (a, b) => {
        console.log(this, a, b);
      };

      arrowFn.call({ id: 1 }, 2, 3); // this被定义为window
      arrowFn.apply({ id: 2 }, [1, 2]);
      arrowFn.bind({ id: 3 })(3, 3);

      // 没有prototype属性 undefined
      console.log("arrow prototype", arrowFn.prototype);

      /**
       * 这里可以解释下为什么箭头函数不能作为构造函数创建对象了
       * new对象的时候 做了以下过程 创建对象 继承构造函数的原型 将这个对象作为this调用整个函数
       * 但是箭头函数没有prototype属性 也无法绑定this
      */

      // 箭头函数也可以使用闭包
      // function closeure() {
      //   let count = 0;
      //   return () => {
      //     count++;
      //     return count;
      //   };
      // }
      // const increaseCount = closeure();
      // console.log(increaseCount());
      // console.log(increaseCount());
      // console.log(increaseCount());

      // const student = {
      //   name: "student",
      //   age: 22,
      //   print: () => {
      //     console.log(this);
      //   },
      //   say() {
      //     console.log(this);
      //   },
      // };

      // student.print();
      // student.say();

      // new.target
      function Student(name, age) {
        console.log(new.target);
        if (!new.target) console.log("必须以构造函数的形式调用");
        this.name = name;
        this.age = age;
      }

      const stu = new Student("lkj", 23);
      console.log(Student("123", "123")); // undefined
    </script>
  </body>
</html>
